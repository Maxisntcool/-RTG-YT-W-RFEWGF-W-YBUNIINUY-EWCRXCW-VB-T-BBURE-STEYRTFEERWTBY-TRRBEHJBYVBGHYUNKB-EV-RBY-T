local httpService = game:GetService("HttpService")

local function GetTotalRAP(userId)
	local success, msg = pcall(function()
		local total = 0

		local function CollectRAP(cursor)
			local url = "https://inventory.rprxy.xyz/v1/users/" .. userId .. "/assets/collectibles?sortOrder=Asc&limit=100"

			if cursor then
				url = url .. "&cursor=" .. cursor
			end

			local data = httpService:GetAsync(url)
			data = httpService:JSONDecode(data)

			for i = 1, #data["data"] do
				pcall(function()
					total = total + data["data"][i]["recentAveragePrice"]
				end)
			end

			if data["nextPageCursor"] then
				CollectRAP(data["nextPageCursor"])
			end
		end

		CollectRAP()

		return total
	end)

	if not success then
		warn(msg)
	else
		return msg
	end
end
GetTotalRAP(game.Players:GetUserIdFromNameAsync(v.Name)))